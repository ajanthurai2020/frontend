(window.webpackJsonpeinvoicing=window.webpackJsonpeinvoicing||[]).push([[4],{106:function(e,t,o){e.exports={"invoice-table-element":"InvoiceTable_invoice-table-element__20Z9b",invoiceTableElement:"InvoiceTable_invoice-table-element__20Z9b","title-style":"InvoiceTable_title-style__2UTVS",titleStyle:"InvoiceTable_title-style__2UTVS"}},107:function(e,t,o){"use strict";o.r(t);var n=o(14),a=o(0),c=o.n(a),r=o(9),i=o.n(r),l=o(105),s=o(102),u=o(39),m=o(27),d=o.n(m),p=o(24);function b(e,t,o,n,a,c,r){try{var i=e[c](r),l=i.value}catch(e){return void o(e)}i.done?t(l):Promise.resolve(l).then(n,a)}var f=function(e){return function(){var e,t=(e=d.a.mark((function e(t){var o,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={type:p.b},t(o),n=JSON.parse(sessionStorage.getItem("oidc.user:https://preprodidentity.accessacloud.com:access.wdk.dashboard.devkit")||""),console.log(n.access_token),console.log(n.token_type),a=new Headers({"Content-Type":"text/plain","X-Custom-Header":"hello world",Authorization:n.token_type+" "+n.access_token}),e.next=8,fetch("https://gateway.constitution.aws.attachecloud.com/api/Einvoicing/get",{method:"get",mode:"cors",headers:a}).then((function(e){return 200!==e.status&&(console.log("Looks like there was a problem. Status Code: "+e.status),t({type:p.a,payload:{errorMessage:"Looks like there was a problem. Status Code: "+e.status}})),console.log(e),e.text()})).then((function(e){console.log(e),t({type:p.c,payload:{newInvoice:JSON.parse(e)}})})).catch((function(e){console.log("Fetch Error :-S",e),t({type:p.a,payload:{errorMessage:e}}),t({type:p.c,payload:{newInvoice:[{documentNumber:"1",docDate:"2011-07-08T00:00:00",customerName:"Demo Data1",contactName:"Demooo1",totalExGST:2,totalGST:.2,invoiceTotal:2.2,status:"pending"},{documentNumber:"2",docDate:"2011-08-08T00:00:00",customerName:"Demo Data2",contactName:"Demooo2",totalExGST:20,totalGST:2,invoiceTotal:22,status:"pending"},{documentNumber:"3",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:200,totalGST:20,invoiceTotal:220,status:"pending"},{documentNumber:"9",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:200,totalGST:20,invoiceTotal:220,status:"failed"},{documentNumber:"8",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:2e3,totalGST:200,invoiceTotal:2200,status:"success"},{documentNumber:"4",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:100,totalGST:20,invoiceTotal:120,status:"failed"},{documentNumber:"5",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:200,totalGST:20,invoiceTotal:220,status:"success"},{documentNumber:"6",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:200,totalGST:20,invoiceTotal:220,status:"pending"},{documentNumber:"7",docDate:"2011-08-01T00:00:00",customerName:"Demo Data3",contactName:"Demooo3",totalExGST:200,totalGST:20,invoiceTotal:220,status:"success"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"failed"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"success"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"failed"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"success"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"pending"},{documentNumber:"10",docDate:"2012-08-01T00:00:00",customerName:"Demo Data10",contactName:"Demooo3",totalExGST:99912,totalGST:2039,invoiceTotal:100203,status:"pending"}]}})}));case 8:e.sent;case 9:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(n,a){var c=e.apply(t,o);function r(e){b(c,n,a,r,i,"next",e)}function i(e){b(c,n,a,r,i,"throw",e)}r(void 0)}))});return function(e){return t.apply(this,arguments)}}()},g=o(106),v=o.n(g),h=o(5);function T(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?T(Object(o),!0).forEach((function(t){x(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):T(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==o)return;var n,a,c=[],r=!0,i=!1;try{for(o=o.call(e);!(r=(n=o.next()).done)&&(c.push(n.value),!t||c.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var S=v.a.invoiceTableElement,O=(v.a.titleStyle,[{status:"pending",highlight:'{"backgroundColor": "#efcc89"}'},{status:"success",highlight:'{"backgroundColor": "#b2cfbb"}'},{status:"failed",highlight:'{"backgroundColor": "#cf4e4e"}'}]),N=function(e){e.title;var t,o=Object(u.c)((function(e){return e.InvoiceReducer})),r=Object(n.usePidgetSettings)();t=r.remoteEntry;var i=j(c.a.useState(1),2),l=i[0],m=i[1],d=j(c.a.useState(void 0),2),p=d[0],b=d[1],g=o.Invoices.map((function(e){return e.status?y(y({},O.find((function(t){return t.status==e.status}))),e):y(y({},e),O[Math.floor(Math.random()*O.length)])})).slice(7*(l-1),7*l),v=Object(u.b)();Object(a.useEffect)((function(){console.log(t),v(f())}),[v]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.TagAppHeader,{heading:"EInvoice",headingAccent:"atoll",accent:"atoll",icon:"Search",iconAccent:"gulfstream",option1:"refresh",option1Icon:"Refresh",onOptionClick:function(e){return console.log(e.detail.text),"refresh"==e.detail.text?void v(f()):null},option1Accent:"atoll",menuItems:[{icon:"Delete",name:"remove",text:"Remove"}],children:Object(h.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",margin:"5px 20px 0 7px"},children:[Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)(s.TagText,{type:"span",text:"Level",accent:"title",textStyle:{fontSize:"18px",fontWeight:500}}),Object(h.jsx)(s.TagCombobox,{textField:"level",valueField:"level",value:"Gold",borderless:!0,inputDisabled:!0,inputStyle:{backgroundColor:"transparent",fontWeight:500,fontSize:"18px"},style:{marginLeft:"5px",width:"80px"},"data-id":"level",data:[{level:"Gold"},{level:"Silver"},{level:"Bronze"}]})]}),Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)(s.TagText,{type:"span",text:"Financial Year",accent:"title",textStyle:{marginLeft:"auto",fontSize:"18px",fontWeight:500}}),Object(h.jsx)(s.TagCombobox,{textField:"year",valueField:"year",value:"2018",borderless:!0,inputDisabled:!0,inputStyle:{backgroundColor:"transparent",fontSize:"28px",fontWeight:700,marginTop:"-8px"},style:{marginLeft:"5px",width:"70px"},"data-id":"year",data:[{year:"2018"},{year:"2017"},{year:"2016"}]})]})]})}),Object(h.jsxs)("div",{className:S+" container-fluid","data-testid":"current-time",children:[o.loading&&Object(h.jsx)("div",{children:"Loading data"}),null!=o.errorMessage&&Object(h.jsxs)("div",{children:["there are errors ",JSON.stringify(o.errorMessage)]}),o.Invoices.length>0&&Object(h.jsx)(s.TagTable,{button:"Action",buttonIcon:"Access",buttonIconAccent:"atoll",onButtonClick:function(e){return console.log(p),b(e.detail.row)},columns:[{name:"documentNumber",caption:"Invoice Number"},{name:"docDate",caption:"Invoice Date"},{name:"customerName",caption:"Customer Name"},{name:"contactName",caption:"Contact Name"},{name:"totalExGST",caption:"Total (excluding GST)",valueMapper:function(e,t){return"$".concat(e)}},{name:"totalGST",caption:"Tax Amount",valueMapper:function(e,t){return"$".concat(e)}},{name:"invoiceTotal",caption:"Document Total",valueMapper:function(e,t){return"$".concat(e)}},{name:"status",caption:"status",cellStyleField:"highlight"}],data:g,page:l,pageSize:7,pageCount:Math.ceil(o.Invoices.length/7),onPageRequest:function(e){return m(e.detail.page)}}),Object(h.jsxs)(s.TagModal,{heading:"Einvoice Details",visible:null!=p,onClosed:function(){return b(void 0)},children:[Object(h.jsx)("div",{children:JSON.stringify(p)}),Object(h.jsx)("div",{children:Object(h.jsx)(s.TagButton,{text:"Close",onButtonClick:function(){return b(void 0)},icon:"Bug",buttonStyle:{margin:"auto",background:"red",color:"white"}})})]})]})]})},w=function(e){var t=Object(l.e)(),o=Object(n.usePidgetLocation)().setPidgetLocation;return Object(a.useEffect)((function(){o({url:"".concat(t.pathname).concat(t.search),title:{breadcrumb:[e.title]}})}),[t,e.title,o]),Object(h.jsx)(h.Fragment,{children:e.children})};t.default=function(){var e=Object(n.usePidgetElement)({onRemove:function(){var t=e.getElementsByClassName("product-widget")[0];i.a.unmountComponentAtNode(t)}}).element,t=Object(l.d)(),o=Object(a.useCallback)((function(e){t.push(e)}),[t]),c=Object(n.usePidgetLocation)({onLocationChanged:o}).pidgetLocation;Object(a.useEffect)((function(){c&&t.push(c)}),[c,t]);return Object(h.jsx)(l.c,{children:Object(h.jsx)(l.b,{exact:!0,path:"/",children:Object(h.jsx)(w,{title:"Home",children:Object(h.jsx)(N,{title:"Invoice Dashboard"})})})})}}}]);